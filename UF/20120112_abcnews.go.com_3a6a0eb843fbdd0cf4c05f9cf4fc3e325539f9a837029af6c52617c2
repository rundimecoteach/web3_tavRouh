Ammaria Johnson, the 7-year-old Virginia girl who died after an allergic reaction at school, was given a peanut by another child unaware of her allergy, police said.

Johnson ate the peanut on the playground of her Chesterfield County elementary school, Hopkins Elementary, during recess. After noticing hives and shortness of breath, she approached a teacher and was taken to the school clinic. A clinic aid was trying to help her when she stopped breathing, according to police.

"When emergency crews arrived, she was already in cardiac arrest in the clinic," Lt. Jason Elmore, a spokesman for the Chesterfield County Fire Department, told ABC News.

An investigation by Chesterfield police concluded that Johnson died from cardiac arrest and anaphylaxis, and that no crime or criminal negligence was committed by the child who shared the peanut, school personnel or Johnson's mother.

"Although not a crime, Amarria's death is a tragedy and the Chesterfield County Police Department expresses its deepest sympathies to her family, classmates and school personnel as they deal with this difficult and painful event," police chief Col. Thierry Dupuis said in a statement.

Johnson's death raised questions about how schools and parents should handle severe allergies. Experts say Johnson could have been saved by an EpiPen -- a device that injects epinephrine to reverse the symptoms of anaphylaxis, currently available only by prescription. But Hopkins Elementary had no such device on hand for Johnson.

Chesterfield County school policy states that parents are responsible for providing the school "with all daily and emergency medications prescribed by the student's health-care provider," and keeping medications up to date.

"For any medication, the school would have to be in possession of that medication to provide it," said Shawn Smith, a spokesman for Chesterfield County Public Schools. Even if the school had an EpiPen prescribed for another student, they would not be permitted to use it.

But a proposed bill would encourage states to adopt laws requiring schools stock EpiPens like bandages and other first-aid supplies for any student or staff member in an anaphylactic emergency.

"When it comes to a life-threatening allergic reaction, it's so simple to save that life," said Maria Acebal, chief executive officer of the Fairfax, Va.-based Food Allergy and Anaphylaxis Network, which championed the bill. "I have no doubt that the school where this little girl went had an EpiPen in the office -- it just didn't have Ammaria's name on it."

The bill would include liability protection for school officials who give epinephrine in good faith, Acebal said.

"No one in this country has ever been sued for giving epinephrine, to my knowledge," said Acebal. "All the lawsuits come about because school officials don't give it when it's needed."

In a healthy child, epinephrine can cause a rapid heart rate, nausea and light-headedness -- mild symptoms that wear off in 15 minutes. It would only be dangerous in children born with a congenital heart condition, which school officials would be aware of.

"We need to do a better job of educating the public about the safety of epinephrine," said Dr. Dan Atkins, head of ambulatory pediatric at National Jewish Health in Denver. "Because it's an injection, it scares people. And because it's a device, it scares people. But rather than thinking, 'I might kill a kid with this,' they should be thinking, 'I could save a life.'"

Acebal, whose eldest daughter has a food allergy, said her other children learned how to inject epinephrine by age 6.

"If I can teach a 6-year-old to do it, we can teach school staff," she said.

Acebal said having epinephrine on hand in school would give students, staff and parents added peace of mind.

"My heart breaks for Ammaria's family because any parent who has a child with a food allergy knows what it's like to fear that phone call from the school," she said.